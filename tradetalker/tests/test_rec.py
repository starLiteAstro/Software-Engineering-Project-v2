import unittest
import pandas as pd
from Recommendation_System import Recommendation_System
"""file is in api folder, but these were tests used"""

#test data
no_following = {'following': [], 'non_following': [{'CompanyID': 1, 'CompanyName': '3i Group plc', 'Industry': 'Asset Management'}, {'CompanyID': 2, 'CompanyName': 'Admiral Group plc', 'Industry': 'Insurance - Property & Casualty'}, {'CompanyID': 3, 'CompanyName': 'Airtel Africa Plc', 'Industry': 'Telecom Services'}, {'CompanyID': 4, 'CompanyName': 'Anglo American plc', 'Industry': 'Other Industrial Metals & Mining'}, {'CompanyID': 5, 'CompanyName': 'Antofagasta plc', 'Industry': 'Copper'}, {'CompanyID': 6, 'CompanyName': 'Ashtead Group plc', 'Industry': 'Rental & Leasing Services'}, {'CompanyID': 7, 'CompanyName': 'Associated British Foods plc', 'Industry': 'Packaged Foods'}, {'CompanyID': 8, 'CompanyName': 'AstraZeneca PLC', 'Industry': 'Drug Manufacturers - General'}, {'CompanyID': 9, 'CompanyName': 'Auto Trader Group plc', 'Industry': 'Internet Content & Information'}, {'CompanyID': 10, 'CompanyName': 'Aviva plc', 'Industry': 'Insurance - Diversified'}, {'CompanyID': 11, 'CompanyName': 'B&M European Value Retail S.A.', 'Industry': 'Discount Stores'}, {'CompanyID': 12, 'CompanyName': 'BAE Systems plc', 'Industry': 'Aerospace & Defense'}], 'keywords': []}
keywords_no_following = {'following': [], 'non_following': [{'CompanyID': 1, 'CompanyName': '3i Group plc', 'Industry': 'Asset Management'}, {'CompanyID': 2, 'CompanyName': 'Admiral Group plc', 'Industry': 'Insurance - Property & Casualty'}, {'CompanyID': 3, 'CompanyName': 'Airtel Africa Plc', 'Industry': 'Telecom Services'}, {'CompanyID': 4, 'CompanyName': 'Anglo American plc', 'Industry': 'Other Industrial Metals & Mining'}, {'CompanyID': 5, 'CompanyName': 'Antofagasta plc', 'Industry': 'Copper'}, {'CompanyID': 6, 'CompanyName': 'Ashtead Group plc', 'Industry': 'Rental & Leasing Services'}, {'CompanyID': 7, 'CompanyName': 'Associated British Foods plc', 'Industry': 'Packaged Foods'}, {'CompanyID': 8, 'CompanyName': 'AstraZeneca PLC', 'Industry': 'Drug Manufacturers - General'}, {'CompanyID': 9, 'CompanyName': 'Auto Trader Group plc', 'Industry': 'Internet Content & Information'}, {'CompanyID': 10, 'CompanyName': 'Aviva plc', 'Industry': 'Insurance - Diversified'}, {'CompanyID': 11, 'CompanyName': 'B&M European Value Retail S.A.', 'Industry': 'Discount Stores'}, {'CompanyID': 12, 'CompanyName': 'BAE Systems plc', 'Industry': 'Aerospace & Defense'}, {'CompanyID': 13, 'CompanyName': 'Barclays PLC', 'Industry': 'Banks - Diversified'}, {'CompanyID': 14, 'CompanyName': 'Barratt Developments plc', 'Industry': 'Residential Construction'}, {'CompanyID': 15, 'CompanyName': 'Beazley plc', 'Industry': 'Insurance - Specialty'}, {'CompanyID': 16, 'CompanyName': 'The Berkeley Group Holdings plc', 'Industry': 'Residential Construction'}, {'CompanyID': 17, 'CompanyName': 'BP p.l.c.', 'Industry': 'Oil & Gas Integrated'}, {'CompanyID': 18, 'CompanyName': 'British American Tobacco p.l.c.', 'Industry': 'Tobacco'}, {'CompanyID': 19, 'CompanyName': 'BT Group plc', 'Industry': 'Telecom Services'}, {'CompanyID': 20, 'CompanyName': 'Bunzl plc', 'Industry': 'Food Distribution'}, {'CompanyID': 21, 'CompanyName': 'Burberry Group plc', 'Industry': 'Luxury Goods'}, {'CompanyID': 22, 'CompanyName': 'Centrica plc', 'Industry': 'Utilities - Independent Power Producers'}, {'CompanyID': 23, 'CompanyName': 'Coca-Cola HBC AG', 'Industry': 'Beverages - Non-Alcoholic'}, {'CompanyID': 24, 'CompanyName': 'Compass Group PLC', 'Industry': 'Restaurants'}], 'keywords': ["profit,airtel,ratio,free,cash,accrual,flow,africa,last,earnings", "growth,3i,said,years,shares,year,rbc,still,see,good", "helium,also,potential,well,liberum,one,he1,company,test,dst", "intelligence,russian,russia,said,operations,one,agents,use,ft,com"]}
industry_check = {'following': [{'CompanyID': 101, 'CompanyName': 'CompanyA', 'Industry': 'Asset Management'}], 'non_following':[{'CompanyID': 1, 'CompanyName': '3i Group plc', 'Industry': 'Asset Management'}, {'CompanyID': 2, 'CompanyName': 'Admiral Group plc', 'Industry': 'Insurance - Property & Casualty'}, {'CompanyID': 3, 'CompanyName': 'Airtel Africa Plc', 'Industry': 'Telecom Services'}, {'CompanyID': 4, 'CompanyName': 'Anglo American plc', 'Industry': 'Other Industrial Metals & Mining'}, {'CompanyID': 5, 'CompanyName': 'Antofagasta plc', 'Industry': 'Copper'}, {'CompanyID': 6, 'CompanyName': 'Ashtead Group plc', 'Industry': 'Rental & Leasing Services'}, {'CompanyID': 7, 'CompanyName': 'Associated British Foods plc', 'Industry': 'Packaged Foods'}, {'CompanyID': 8, 'CompanyName': 'AstraZeneca PLC', 'Industry': 'Drug Manufacturers - General'}, {'CompanyID': 9, 'CompanyName': 'Auto Trader Group plc', 'Industry': 'Internet Content & Information'}, {'CompanyID': 10, 'CompanyName': 'Aviva plc', 'Industry': 'Insurance - Diversified'}, {'CompanyID': 11, 'CompanyName': 'B&M European Value Retail S.A.', 'Industry': 'Discount Stores'}, {'CompanyID': 12, 'CompanyName': 'BAE Systems plc', 'Industry': 'Aerospace & Defense'}, {'CompanyID': 13, 'CompanyName': 'Barclays PLC', 'Industry': 'Banks - Diversified'}, {'CompanyID': 14, 'CompanyName': 'Barratt Developments plc', 'Industry': 'Residential Construction'}, {'CompanyID': 15, 'CompanyName': 'Beazley plc', 'Industry': 'Insurance - Specialty'}, {'CompanyID': 16, 'CompanyName': 'The Berkeley Group Holdings plc', 'Industry': 'Residential Construction'}, {'CompanyID': 17, 'CompanyName': 'BP p.l.c.', 'Industry': 'Oil & Gas Integrated'}, {'CompanyID': 18, 'CompanyName': 'British American Tobacco p.l.c.', 'Industry': 'Tobacco'}, {'CompanyID': 19, 'CompanyName': 'BT Group plc', 'Industry': 'Telecom Services'}, {'CompanyID': 20, 'CompanyName': 'Bunzl plc', 'Industry': 'Food Distribution'}, {'CompanyID': 21, 'CompanyName': 'Burberry Group plc', 'Industry': 'Luxury Goods'}, {'CompanyID': 22, 'CompanyName': 'Centrica plc', 'Industry': 'Utilities - Independent Power Producers'}, {'CompanyID': 23, 'CompanyName': 'Coca-Cola HBC AG', 'Industry': 'Beverages - Non-Alcoholic'}, {'CompanyID': 24, 'CompanyName': 'Compass Group PLC', 'Industry': 'Restaurants'}, {'CompanyID': 25, 'CompanyName': 'ConvaTec Group PLC', 'Industry': 'Medical Instruments & Supplies'}, {'CompanyID': 26, 'CompanyName': 'Croda International Plc', 'Industry': 'Specialty Chemicals'}, {'CompanyID': 27, 'CompanyName': 'DCC plc', 'Industry': 'Oil & Gas Refining & Marketing'}, {'CompanyID': 28, 'CompanyName': 'Diageo plc', 'Industry': 'Beverages - Wineries & Distilleries'}, {'CompanyID': 29, 'CompanyName': 'Diploma PLC', 'Industry': 'Industrial Distribution'}, {'CompanyID': 30, 'CompanyName': 'Endeavour Mining plc', 'Industry': 'Gold'}, {'CompanyID': 31, 'CompanyName': 'Entain Plc', 'Industry': 'Gambling'}, {'CompanyID': 32, 'CompanyName': 'Experian plc', 'Industry': 'Consulting Services'}, {'CompanyID': 33, 'CompanyName': 'F&C Investment Trust PLC', 'Industry': 'Asset Management'}, {'CompanyID': 34, 'CompanyName': 'Flutter Entertainment plc', 'Industry': 'Gambling'}, {'CompanyID': 35, 'CompanyName': 'Frasers Group Plc', 'Industry': 'Specialty Retail'}, {'CompanyID': 36, 'CompanyName': 'Fresnillo plc', 'Industry': 'Other Precious Metals & Mining'}, {'CompanyID': 37, 'CompanyName': 'Glencore plc', 'Industry': 'Other Industrial Metals & Mining'}, {'CompanyID': 38, 'CompanyName': 'GSK plc', 'Industry': 'Drug Manufacturers - General'}, {'CompanyID': 39, 'CompanyName': 'Haleon plc', 'Industry': 'Drug Manufacturers - Specialty & Generic'}, {'CompanyID': 40, 'CompanyName': 'Halma plc', 'Industry': 'Conglomerates'}, {'CompanyID': 41, 'CompanyName': 'Hikma Pharmaceuticals PLC', 'Industry': 'Drug Manufacturers - Specialty & Generic'}, {'CompanyID': 42, 'CompanyName': 'Howden Joinery Group Plc', 'Industry': 'Furnishings, Fixtures & Appliances'}, {'CompanyID': 43, 'CompanyName': 'HSBC Holdings plc', 'Industry': 'Banks - Diversified'}, {'CompanyID': 44, 'CompanyName': 'InterContinental Hotels Group PLC', 'Industry': 'Lodging'}, {'CompanyID': 45, 'CompanyName': 'IMI plc', 'Industry': 'Specialty Industrial Machinery'}, {'CompanyID': 46, 'CompanyName': 'Imperial Brands PLC', 'Industry': 'Tobacco'}, {'CompanyID': 47, 'CompanyName': 'Informa plc', 'Industry': 'Publishing'}, {'CompanyID': 48, 'CompanyName': 'Intermediate Capital Group plc', 'Industry': 'Asset Management'}, {'CompanyID': 49, 'CompanyName': 'International Consolidated Airlines Group S.A.', 'Industry': 'Airlines'}, {'CompanyID': 50, 'CompanyName': 'Intertek Group plc', 'Industry': 'Specialty Business Services'}, {'CompanyID': 51, 'CompanyName': 'JD Sports Fashion Plc', 'Industry': 'Apparel Retail'}, {'CompanyID': 52, 'CompanyName': 'Kingfisher plc', 'Industry': 'Home Improvement Retail'}, {'CompanyID': 53, 'CompanyName': 'Land Securities Group Plc', 'Industry': 'REIT - Diversified'}, {'CompanyID': 54, 'CompanyName': 'Legal & General Group Plc', 'Industry': 'Asset Management'}, {'CompanyID': 55, 'CompanyName': 'Lloyds Banking Group plc', 'Industry': 'Banks - Regional'}, {'CompanyID': 56, 'CompanyName': 'London Stock Exchange Group plc', 'Industry': 'Financial Data & Stock Exchanges'}, {'CompanyID': 57, 'CompanyName': 'M&G plc', 'Industry': 'Asset Management'}, {'CompanyID': 58, 'CompanyName': 'Marks and Spencer Group plc', 'Industry': 'Department Stores'}, {'CompanyID': 59, 'CompanyName': 'Melrose Industries PLC', 'Industry': 'Specialty Industrial Machinery'}, {'CompanyID': 60, 'CompanyName': 'Mondi plc', 'Industry': 'Paper & Paper Products'}, {'CompanyID': 61, 'CompanyName': 'National Grid plc', 'Industry': 'Utilities - Regulated Electric'}, {'CompanyID': 62, 'CompanyName': 'NatWest Group plc', 'Industry': 'Banks - Regional'}, {'CompanyID': 63, 'CompanyName': 'NEXT plc', 'Industry': 'Apparel Retail'}, {'CompanyID': 64, 'CompanyName': 'Ocado Group plc', 'Industry': 'Grocery Stores'}, {'CompanyID': 65, 'CompanyName': 'Pearson plc', 'Industry': 'Publishing'}, {'CompanyID': 66, 'CompanyName': 'Pershing Square Holdings, Ltd.', 'Industry': 'N/A'}, {'CompanyID': 67, 'CompanyName': 'Persimmon Plc', 'Industry': 'Residential Construction'}, {'CompanyID': 68, 'CompanyName': 'Phoenix Group Holdings plc', 'Industry': 'Insurance - Life'}, {'CompanyID': 69, 'CompanyName': 'Prudential plc', 'Industry': 'Insurance - Life'}, {'CompanyID': 70, 'CompanyName': 'Reckitt Benckiser Group plc', 'Industry': 'Household & Personal Products'}, {'CompanyID': 71, 'CompanyName': 'RELX PLC', 'Industry': 'Specialty Business Services'}, {'CompanyID': 72, 'CompanyName': 'Rentokil Initial plc', 'Industry': 'Specialty Business Services'}, {'CompanyID': 73, 'CompanyName': 'Rightmove plc', 'Industry': 'Internet Content & Information'}, {'CompanyID': 74, 'CompanyName': 'Rio Tinto Group', 'Industry': 'Other Industrial Metals & Mining'}, {'CompanyID': 75, 'CompanyName': 'Rolls-Royce Holdings plc', 'Industry': 'Aerospace & Defense'}, {'CompanyID': 76, 'CompanyName': 'RS Group plc', 'Industry': 'Industrial Distribution'}, {'CompanyID': 77, 'CompanyName': 'The Sage Group plc', 'Industry': 'Software - Application'}, {'CompanyID': 78, 'CompanyName': 'J Sainsbury plc', 'Industry': 'Grocery Stores'}, {'CompanyID': 79, 'CompanyName': 'Schroders plc', 'Industry': 'Asset Management'}, {'CompanyID': 80, 'CompanyName': 'Scottish Mortgage Investment Trust PLC', 'Industry': 'N/A'}, {'CompanyID': 81, 'CompanyName': 'SEGRO Plc', 'Industry': 'REIT - Industrial'}, {'CompanyID': 82, 'CompanyName': 'Severn Trent PLC', 'Industry': 'Utilities - Regulated Water'}, {'CompanyID': 83, 'CompanyName': 'Shell plc', 'Industry': 'Oil & Gas Integrated'}, {'CompanyID': 84, 'CompanyName': 'DS Smith Plc', 'Industry': 'Packaging & Containers'}, {'CompanyID': 85, 'CompanyName': 'Smiths Group plc', 'Industry': 'Specialty Industrial Machinery'}, {'CompanyID': 86, 'CompanyName': 'Smith & Nephew plc', 'Industry': 'Medical Devices'}, {'CompanyID': 87, 'CompanyName': 'Smurfit Kappa Group Plc', 'Industry': 'Packaging & Containers'}, {'CompanyID': 88, 'CompanyName': 'Spirax-Sarco Engineering plc', 'Industry': 'Specialty Industrial Machinery'}, {'CompanyID': 89, 'CompanyName': 'SSE plc', 'Industry': 'Utilities - Diversified'}, {'CompanyID': 90, 'CompanyName': 'Standard Chartered PLC', 'Industry': 'Banks - Diversified'}, {'CompanyID': 91, 'CompanyName': "St. James's Place plc", 'Industry': 'Asset Management'}, {'CompanyID': 92, 'CompanyName': 'Taylor Wimpey plc', 'Industry': 'Residential Construction'}, {'CompanyID': 93, 'CompanyName': 'Tesco PLC', 'Industry': 'Grocery Stores'}, {'CompanyID': 94, 'CompanyName': 'Unilever PLC', 'Industry': 'Household & Personal Products'}, {'CompanyID': 95, 'CompanyName': 'United Utilities Group PLC', 'Industry': 'Utilities - Regulated Water'}, {'CompanyID': 96, 'CompanyName': 'Unite Group PLC', 'Industry': 'REIT - Diversified'}, {'CompanyID': 97, 'CompanyName': 'Vodafone Group Public Limited Company', 'Industry': 'Telecom Services'}, {'CompanyID': 98, 'CompanyName': 'The Weir Group PLC', 'Industry': 'Specialty Industrial Machinery'}, {'CompanyID': 99, 'CompanyName': 'Whitbread plc', 'Industry': 'Lodging'}, {'CompanyID': 100, 'CompanyName': 'WPP plc', 'Industry': 'Advertising Agencies'}],'keywords':[]}
industry_proportion_check = {'following': [{'CompanyID': 101, 'CompanyName': 'CompanyA', 'Industry': 'Copper'}, {'CompanyID':102,'CompanyName':'CompanyB','Industry': 'Industrial Distribution'}, {'CompanyID':103,'CompanyName':'CompanyC','Industry':'Restaurants'}, {'CompanyID':104,'CompanyName':'CompanyD','Industry':'Insurance - Specialty'}], 'non_following':[{'CompanyID': 1, 'CompanyName': '3i Group plc', 'Industry': 'Asset Management'}, {'CompanyID': 2, 'CompanyName': 'Admiral Group plc', 'Industry': 'Insurance - Property & Casualty'}, {'CompanyID': 3, 'CompanyName': 'Airtel Africa Plc', 'Industry': 'Telecom Services'}, {'CompanyID': 4, 'CompanyName': 'Anglo American plc', 'Industry': 'Other Industrial Metals & Mining'}, {'CompanyID': 5, 'CompanyName': 'Antofagasta plc', 'Industry': 'Copper'}, {'CompanyID': 6, 'CompanyName': 'Ashtead Group plc', 'Industry': 'Rental & Leasing Services'}, {'CompanyID': 7, 'CompanyName': 'Associated British Foods plc', 'Industry': 'Packaged Foods'}, {'CompanyID': 8, 'CompanyName': 'AstraZeneca PLC', 'Industry': 'Drug Manufacturers - General'}, {'CompanyID': 9, 'CompanyName': 'Auto Trader Group plc', 'Industry': 'Internet Content & Information'}, {'CompanyID': 10, 'CompanyName': 'Aviva plc', 'Industry': 'Insurance - Diversified'}, {'CompanyID': 11, 'CompanyName': 'B&M European Value Retail S.A.', 'Industry': 'Discount Stores'}, {'CompanyID': 12, 'CompanyName': 'BAE Systems plc', 'Industry': 'Aerospace & Defense'}, {'CompanyID': 13, 'CompanyName': 'Barclays PLC', 'Industry': 'Banks - Diversified'}, {'CompanyID': 14, 'CompanyName': 'Barratt Developments plc', 'Industry': 'Residential Construction'}, {'CompanyID': 15, 'CompanyName': 'Beazley plc', 'Industry': 'Insurance - Specialty'}, {'CompanyID': 16, 'CompanyName': 'The Berkeley Group Holdings plc', 'Industry': 'Residential Construction'}, {'CompanyID': 17, 'CompanyName': 'BP p.l.c.', 'Industry': 'Oil & Gas Integrated'}, {'CompanyID': 18, 'CompanyName': 'British American Tobacco p.l.c.', 'Industry': 'Tobacco'}, {'CompanyID': 19, 'CompanyName': 'BT Group plc', 'Industry': 'Telecom Services'}, {'CompanyID': 20, 'CompanyName': 'Bunzl plc', 'Industry': 'Food Distribution'}, {'CompanyID': 21, 'CompanyName': 'Burberry Group plc', 'Industry': 'Luxury Goods'}, {'CompanyID': 22, 'CompanyName': 'Centrica plc', 'Industry': 'Utilities - Independent Power Producers'}, {'CompanyID': 23, 'CompanyName': 'Coca-Cola HBC AG', 'Industry': 'Beverages - Non-Alcoholic'}, {'CompanyID': 24, 'CompanyName': 'Compass Group PLC', 'Industry': 'Restaurants'}, {'CompanyID': 25, 'CompanyName': 'ConvaTec Group PLC', 'Industry': 'Medical Instruments & Supplies'}, {'CompanyID': 26, 'CompanyName': 'Croda International Plc', 'Industry': 'Specialty Chemicals'}, {'CompanyID': 27, 'CompanyName': 'DCC plc', 'Industry': 'Oil & Gas Refining & Marketing'}, {'CompanyID': 28, 'CompanyName': 'Diageo plc', 'Industry': 'Beverages - Wineries & Distilleries'}, {'CompanyID': 29, 'CompanyName': 'Diploma PLC', 'Industry': 'Industrial Distribution'}, {'CompanyID': 30, 'CompanyName': 'Endeavour Mining plc', 'Industry': 'Gold'}, {'CompanyID': 31, 'CompanyName': 'Entain Plc', 'Industry': 'Gambling'}, {'CompanyID': 32, 'CompanyName': 'Experian plc', 'Industry': 'Consulting Services'}, {'CompanyID': 33, 'CompanyName': 'F&C Investment Trust PLC', 'Industry': 'Asset Management'}, {'CompanyID': 34, 'CompanyName': 'Flutter Entertainment plc', 'Industry': 'Gambling'}, {'CompanyID': 35, 'CompanyName': 'Frasers Group Plc', 'Industry': 'Specialty Retail'}, {'CompanyID': 36, 'CompanyName': 'Fresnillo plc', 'Industry': 'Other Precious Metals & Mining'}, {'CompanyID': 37, 'CompanyName': 'Glencore plc', 'Industry': 'Other Industrial Metals & Mining'}, {'CompanyID': 38, 'CompanyName': 'GSK plc', 'Industry': 'Drug Manufacturers - General'}, {'CompanyID': 39, 'CompanyName': 'Haleon plc', 'Industry': 'Drug Manufacturers - Specialty & Generic'}, {'CompanyID': 40, 'CompanyName': 'Halma plc', 'Industry': 'Conglomerates'}, {'CompanyID': 41, 'CompanyName': 'Hikma Pharmaceuticals PLC', 'Industry': 'Drug Manufacturers - Specialty & Generic'}, {'CompanyID': 42, 'CompanyName': 'Howden Joinery Group Plc', 'Industry': 'Furnishings, Fixtures & Appliances'}, {'CompanyID': 43, 'CompanyName': 'HSBC Holdings plc', 'Industry': 'Banks - Diversified'}, {'CompanyID': 44, 'CompanyName': 'InterContinental Hotels Group PLC', 'Industry': 'Lodging'}, {'CompanyID': 45, 'CompanyName': 'IMI plc', 'Industry': 'Specialty Industrial Machinery'}, {'CompanyID': 46, 'CompanyName': 'Imperial Brands PLC', 'Industry': 'Tobacco'}, {'CompanyID': 47, 'CompanyName': 'Informa plc', 'Industry': 'Publishing'}, {'CompanyID': 48, 'CompanyName': 'Intermediate Capital Group plc', 'Industry': 'Asset Management'}, {'CompanyID': 49, 'CompanyName': 'International Consolidated Airlines Group S.A.', 'Industry': 'Airlines'}, {'CompanyID': 50, 'CompanyName': 'Intertek Group plc', 'Industry': 'Specialty Business Services'}, {'CompanyID': 51, 'CompanyName': 'JD Sports Fashion Plc', 'Industry': 'Apparel Retail'}, {'CompanyID': 52, 'CompanyName': 'Kingfisher plc', 'Industry': 'Home Improvement Retail'}, {'CompanyID': 53, 'CompanyName': 'Land Securities Group Plc', 'Industry': 'REIT - Diversified'}, {'CompanyID': 54, 'CompanyName': 'Legal & General Group Plc', 'Industry': 'Asset Management'}, {'CompanyID': 55, 'CompanyName': 'Lloyds Banking Group plc', 'Industry': 'Banks - Regional'}, {'CompanyID': 56, 'CompanyName': 'London Stock Exchange Group plc', 'Industry': 'Financial Data & Stock Exchanges'}, {'CompanyID': 57, 'CompanyName': 'M&G plc', 'Industry': 'Asset Management'}, {'CompanyID': 58, 'CompanyName': 'Marks and Spencer Group plc', 'Industry': 'Department Stores'}, {'CompanyID': 59, 'CompanyName': 'Melrose Industries PLC', 'Industry': 'Specialty Industrial Machinery'}, {'CompanyID': 60, 'CompanyName': 'Mondi plc', 'Industry': 'Paper & Paper Products'}, {'CompanyID': 61, 'CompanyName': 'National Grid plc', 'Industry': 'Utilities - Regulated Electric'}, {'CompanyID': 62, 'CompanyName': 'NatWest Group plc', 'Industry': 'Banks - Regional'}, {'CompanyID': 63, 'CompanyName': 'NEXT plc', 'Industry': 'Apparel Retail'}, {'CompanyID': 64, 'CompanyName': 'Ocado Group plc', 'Industry': 'Grocery Stores'}, {'CompanyID': 65, 'CompanyName': 'Pearson plc', 'Industry': 'Publishing'}, {'CompanyID': 66, 'CompanyName': 'Pershing Square Holdings, Ltd.', 'Industry': 'N/A'}, {'CompanyID': 67, 'CompanyName': 'Persimmon Plc', 'Industry': 'Residential Construction'}, {'CompanyID': 68, 'CompanyName': 'Phoenix Group Holdings plc', 'Industry': 'Insurance - Life'}, {'CompanyID': 69, 'CompanyName': 'Prudential plc', 'Industry': 'Insurance - Life'}, {'CompanyID': 70, 'CompanyName': 'Reckitt Benckiser Group plc', 'Industry': 'Household & Personal Products'}, {'CompanyID': 71, 'CompanyName': 'RELX PLC', 'Industry': 'Specialty Business Services'}, {'CompanyID': 72, 'CompanyName': 'Rentokil Initial plc', 'Industry': 'Specialty Business Services'}, {'CompanyID': 73, 'CompanyName': 'Rightmove plc', 'Industry': 'Internet Content & Information'}, {'CompanyID': 74, 'CompanyName': 'Rio Tinto Group', 'Industry': 'Other Industrial Metals & Mining'}, {'CompanyID': 75, 'CompanyName': 'Rolls-Royce Holdings plc', 'Industry': 'Aerospace & Defense'}, {'CompanyID': 76, 'CompanyName': 'RS Group plc', 'Industry': 'Industrial Distribution'}, {'CompanyID': 77, 'CompanyName': 'The Sage Group plc', 'Industry': 'Software - Application'}, {'CompanyID': 78, 'CompanyName': 'J Sainsbury plc', 'Industry': 'Grocery Stores'}, {'CompanyID': 79, 'CompanyName': 'Schroders plc', 'Industry': 'Asset Management'}, {'CompanyID': 80, 'CompanyName': 'Scottish Mortgage Investment Trust PLC', 'Industry': 'N/A'}, {'CompanyID': 81, 'CompanyName': 'SEGRO Plc', 'Industry': 'REIT - Industrial'}, {'CompanyID': 82, 'CompanyName': 'Severn Trent PLC', 'Industry': 'Utilities - Regulated Water'}, {'CompanyID': 83, 'CompanyName': 'Shell plc', 'Industry': 'Oil & Gas Integrated'}, {'CompanyID': 84, 'CompanyName': 'DS Smith Plc', 'Industry': 'Packaging & Containers'}, {'CompanyID': 85, 'CompanyName': 'Smiths Group plc', 'Industry': 'Specialty Industrial Machinery'}, {'CompanyID': 86, 'CompanyName': 'Smith & Nephew plc', 'Industry': 'Medical Devices'}, {'CompanyID': 87, 'CompanyName': 'Smurfit Kappa Group Plc', 'Industry': 'Packaging & Containers'}, {'CompanyID': 88, 'CompanyName': 'Spirax-Sarco Engineering plc', 'Industry': 'Specialty Industrial Machinery'}, {'CompanyID': 89, 'CompanyName': 'SSE plc', 'Industry': 'Utilities - Diversified'}, {'CompanyID': 90, 'CompanyName': 'Standard Chartered PLC', 'Industry': 'Banks - Diversified'}, {'CompanyID': 91, 'CompanyName': "St. James's Place plc", 'Industry': 'Asset Management'}, {'CompanyID': 92, 'CompanyName': 'Taylor Wimpey plc', 'Industry': 'Residential Construction'}, {'CompanyID': 93, 'CompanyName': 'Tesco PLC', 'Industry': 'Grocery Stores'}, {'CompanyID': 94, 'CompanyName': 'Unilever PLC', 'Industry': 'Household & Personal Products'}, {'CompanyID': 95, 'CompanyName': 'United Utilities Group PLC', 'Industry': 'Utilities - Regulated Water'}, {'CompanyID': 96, 'CompanyName': 'Unite Group PLC', 'Industry': 'REIT - Diversified'}, {'CompanyID': 97, 'CompanyName': 'Vodafone Group Public Limited Company', 'Industry': 'Telecom Services'}, {'CompanyID': 98, 'CompanyName': 'The Weir Group PLC', 'Industry': 'Specialty Industrial Machinery'}, {'CompanyID': 99, 'CompanyName': 'Whitbread plc', 'Industry': 'Lodging'}, {'CompanyID': 100, 'CompanyName': 'WPP plc', 'Industry': 'Advertising Agencies'}],'keywords':[]}
all_followed = {'following': [{'CompanyID': 1, 'CompanyName': '3i Group plc', 'Industry': 'Asset Management'}, {'CompanyID': 2, 'CompanyName': 'Admiral Group plc', 'Industry': 'Insurance - Property & Casualty'}, {'CompanyID': 3, 'CompanyName': 'Airtel Africa Plc', 'Industry': 'Telecom Services'}, {'CompanyID': 4, 'CompanyName': 'Anglo American plc', 'Industry': 'Other Industrial Metals & Mining'}], 'non_following': [], 'keywords': []}

class TestRecommendationSystem(unittest.TestCase):

    def test_wordsearch(self):
        """Check keyword search is correct, airtel africa and i3 group should be recommended"""
        recs = Recommendation_System(keywords_no_following).recommend()
        self.assertTrue((1 in recs) and (3 in recs))

    def test_leftover(self):
        """Check that if nothing is recommended from articles or followed companies, 10 companies are still recommended"""
        recs = Recommendation_System(no_following).recommend()
        self.assertTrue(len(recs)>9)

    def test_industry_filter(self):
        """Check that companies recommended come from same industry group as following"""
        recSys = Recommendation_System(industry_check)
        industry_groups = recSys.industry_groups
        recs = recSys.recommend()
        companies = pd.DataFrame.from_dict(industry_check['non_following'])
        print(recs)
        industries = []
        for id in recs:
            industries.append(companies[companies['CompanyID'] == id]['Industry'].iloc[0])
        
        for ind in industries:
            self.assertIn(ind, industry_groups['Finance and Banking'])

    def test_industry_proportions(self):
        """Check that proportion of recommendations from each industry matches proportions in followed companies"""
        recSys = Recommendation_System(industry_proportion_check)
        industry_groups = recSys.industry_groups
        recs = recSys.recommend()
        companies = pd.DataFrame.from_dict(industry_check['non_following'])
        industries = []
        for id in recs:
            industries.append(companies[companies['CompanyID'] == id]['Industry'].iloc[0])
        group_count = [0,0,0,0]  #[0] is Manufacturing and Industrial, [1] is Entertainment and Hospitality, [2] is Finance and Banking,[3] is anything else
        for ind in industries:
            if (ind in industry_groups['Manufacturing and Industrial']):
                group_count[0] += 1
            elif (ind in industry_groups['Entertainment and Hospitality']):
                group_count[1] += 1
            elif (ind in industry_groups['Finance and Banking']):
                group_count[2] += 1
            else:
                group_count[3] += 1
        self.assertTrue(group_count[0] >= 5 and group_count[1] >= 2 and group_count[2] >= 2)
    
    def test_all_followed(self):
        """Check that an empty set is returned if all companies are followed"""
        recs = Recommendation_System(all_followed).recommend()
        self.assertTrue(len(recs) == 0)